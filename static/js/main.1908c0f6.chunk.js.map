{"version":3,"sources":["useEAData.js","sliders.js","FileUpload.js","ThreeVis/HoverDialog.js","ThreeVis/utils.js","ThreeVis/InstancedPoints.js","ThreeVis/useMousePointInteraction.js","ThreeVis/Controls.js","ThreeVis/Effects.js","ThreeVis/ThreeVis.js","index.js","usePlayerControl.js","useKeyEvents.js"],"names":["THREE","require","getColor","d","color","Color","toArray","computeColors","data","map","is_best","is_feasible","flat","ProgressBarSlider","withStyles","root","height","thumb","width","backgroundColor","border","marginTop","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","rail","Slider","BaseSlider","margintop","marginleft","top","background","ProgressBar","min","max","now","label","onChange","className","defaultValue","valueLabelDisplay","aria-label","value","step","Typography","GeneralSlider","valueLabelFormat","FileUpload","setContent","ref","useRef","reader","useMemo","fr","FileReader","onload","e","JSON","parse","result","type","style","display","accept","readAsText","target","files","onClick","current","click","HoverDialog","pointsAnim","selectedPoint","pointsData","hoverRef","show","index","useThree","size","camera","position","clientPosition","Vector3","console","log","a","x","y","multiplyScalar","subScalar","unproject","getCanvasPosition","scratchObject3D","Object3D","InstancedPoints","sphereSize","nPoints","speed","setSelectedPoint","meshRef","colorRef","scene","aspect","points","colors","colorArray","Float32Array","useEffect","onFrame","useSpring","config","duration","useAnimatedLayout","mesh","colorAttrib","selectedSize","Array","length","fill","forEach","i","slice","z","set","scale","setScalar","updateMatrix","setMatrixAt","matrix","needsUpdate","instanceMatrix","updateInstancedMeshMatrices","onSelectPoint","mouseDownRef","handlePointerDown","clientX","clientY","handleClick","event","instanceId","Math","sqrt","pow","stopPropagation","useMousePointInteraction","args","frustumCulled","onPointerDown","attach","attachObject","vertexColors","VertexColors","group","interpolate","distance","intensity","decay","extend","TrackballControls","Controls","minDistance","maxDistance","defaultPosition","controls","gl","useFrame","update","select","domElement","on","up","up0","dynamicDampingFactor","keys","mouseButtons","LEFT","MOUSE","PAN","MIDDLE","ZOOM","RIGHT","ROTATE","Effects","composer","Vector2","setSize","render","bloom","resolution","strength","radius","threshold","attachArray","FXAAShader","material-uniforms-resolution-value","renderToScreen","EffectComposer","ShaderPass","RenderPass","UnrealBloomPass","ThreeVis","useState","fov","near","far","onPointerMissed","skyColor","groundColor","ReactDOM","fileData","setFileData","eaData","sourceData","limits","n","Object","times","time","maxTime","scaleLinear","domain","range","point","idx","fitness_value","toFixed","constraints_sum","useEAData","setSphereSize","setSpeed","setTime","thisTime","play","setPlay","setPlayCb","playRef","removeTimeout","useCallback","playCb","clearTimeout","playFunc","setTimeout","stopPlay","tooglePlay","PlayerControl","icon","faStepBackward","faCaretLeft","faPause","faPlay","faCaretRight","faStepForward","usePlayerControl","speedStep","minSpeed","maxSpeed","document","onkeydown","tagName","code","useKeyEvents","unit","href","getElementById"],"mappings":"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","file":"static/js/main.1908c0f6.chunk.js","sourcesContent":["import { useMemo } from 'react';\nimport { scaleLinear, max } from 'd3';\nimport eaData from './data/ea_data.json';\nconst THREE = require('three');\n\nconst pointsScale = 25; // Size to fill the screen\n\n// const colors = ['#ffd700', '#ffb14e', '#fa8775', '#ea5f94', '#cd34b5', '#9d02d7', '#0000ff'];\n\nconst getColor = d => {\n  let color;\n  switch (d) {\n    case 'best':\n      color = new THREE.Color('#5edc1f');\n      break;\n  \n    case 'infeasible':\n      color = new THREE.Color('#dd3300');\n      break;\n\n    default:\n      color = new THREE.Color('#0000ff');\n  }\n  return color.toArray();\n};\n\nconst computeColors = data => {\n  const colors = data.map(d => (\n    d.is_best\n      ? 'best'\n      : d.is_feasible ? 'normal' : 'infeasible'\n  )).map(getColor).flat();\n  return colors;\n};\n\nexport const useEAData = ( fileData ) => ( \n  useMemo(() => {\n    const sourceData = fileData ? fileData : eaData;\n    const { data, limits } = sourceData;\n    const n = data.length;\n    const nPoints = Object.keys(data[0]).length;\n    const times = data.map(d => d[0].time);\n    const maxTime = max(times);\n    const scale = scaleLinear().domain(limits).range([-pointsScale,pointsScale]);\n    const points = data.map(d => d.map(point => point.data.map(scale)).flat());\n    const colors = data.map(computeColors);\n\n    const pointsData = data.map(d => d.map( point => (\n      `Individual ${point.idx} ${point.is_best ? '(Best!)' : ''}\n       Fitness value: ${point.fitness_value.toFixed(2)}\n       Constraints sum: ${point.constraints_sum.toFixed(2)}\n       Feasible: ${point.is_feasible}\n       Time: ${point.time}\n       `\n    )));\n\n    return { n, nPoints, times, maxTime, points, colors, pointsData };\n  }, [ fileData ])\n);","import 'bootstrap/dist/css/bootstrap.css';\nimport React from 'react';\nimport { Slider, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst ProgressBarSlider = withStyles({ \n  root: {\n    // color: '#52af77',\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus,&:hover,&$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\nconst BaseSlider = withStyles({\n  root: {\n    color: '#8f8f8f',\n  },\n  thumb: {\n    height: 15,\n    width: 15,\n    margintop: -5,\n    marginleft: -5,\n    color: '#787878',\n  },\n  valueLabel: {\n    top: 20,\n    '& *': {\n      background: 'transparent',\n      color: '#000',\n      width: 50\n    },\n  },\n  rail: {\n    height: 5,\n  },\n})(Slider);\n\nexport const ProgressBar = ({ min, max, now, label, onChange }) => {\n  return (\n    <div className='row'>\n      <ProgressBarSlider\n        className='col-8 offset-2'\n        defaultValue={0}\n        valueLabelDisplay='off'\n        aria-label='pretto slider'\n        min={min}\n        max={max}\n        value={now}\n        step={1}\n        onChange={onChange}\n      />\n      <Typography className='col-2 align-self-center'>{label}</Typography>\n    </div>\n  );\n};\n\nexport const GeneralSlider = ({ min, max, now, step, defaultValue, valueLabelFormat, onChange, className }) => {\n  return (\n    <BaseSlider\n      className={className}\n      defaultValue={defaultValue}\n      valueLabelFormat={valueLabelFormat}\n      valueLabelDisplay='on'\n      aria-label='pretto slider'\n      min={min}\n      max={max}\n      value={now}\n      step={step}\n      onChange={onChange}\n      track={false}\n    />\n  );\n};\n","import React, { useMemo, useRef } from 'react';\n\nexport const FileUpload = ({ className, setContent }) => { \n  const ref = useRef();\n  const reader = useMemo(() => {\n    const fr = new FileReader();\n    fr.onload = e => {\n      setContent(JSON.parse(fr.result));\n    };\n    return fr;\n  }, [ setContent ]);\n  return (\n    <div className={className}>\n      <input\n        ref={ref}\n        type='file'\n        style={{display: 'none'}}\n        accept='.json'\n        onChange={e => {\n          reader.readAsText(e.target.files[0]);\n        }}\n      />\n      <button\n        className='btn btn-outline-secondary btn-sm'\n        onClick={() => ref.current.click()}\n      >\n        Upload File\n      </button>\n    </div>\n  );\n };\n","import React, { useRef, useMemo } from 'react';\nimport { Dom, useThree } from 'react-three-fiber';\nimport { getCanvasPosition } from './utils';\nconst THREE = require('three');\n\nconst margin = 10;\n\nexport const HoverDialog = ({ pointsAnim, selectedPoint, pointsData }) => {\n  const hoverRef = useRef();\n  const { show, index } = selectedPoint;\n  const { size, camera } = useThree();\n  const position = useMemo(() => {\n    const clientPosition = new THREE.Vector3(size.width, 200, 0)\n    console.log(clientPosition);\n    const a = getCanvasPosition(clientPosition, size, camera);\n    console.log(a);\n    return a;\n  }, [ size, camera ]);\n  console.log(position);\n\n  return (\n    <Dom\n      position={[5, 0, 0]}\n      style={{\n        display: show ? 'block' : 'none'\n      }}\n      ref={hoverRef}\n    >\n      <div className='hover-description'>\n        { pointsData[index] }\n      </div>\n    </Dom>\n  );\n};","const THREE = require('three');\n\nexport const getClientPosition = (point, size, camera) => {\n  const clientPosition = new THREE.Vector3(...point);\n  clientPosition.project(camera).addScalar(1).divideScalar(2);\n  clientPosition.x *= size.width;\n  clientPosition.y *= size.height;\n  return clientPosition;\n};\n\nexport const getCanvasPosition = (clientPosition, size, camera) => {\n  clientPosition.x /= size.width;\n  clientPosition.y /= size.height;\n  clientPosition.multiplyScalar(2).subScalar(1).unproject(camera);\n  return [clientPosition.x, clientPosition.y, 0];\n};\n","import React, { useRef, useEffect, useMemo } from 'react';\nimport { useThree } from 'react-three-fiber';\nimport { useSpring, a } from 'react-spring/three';\nimport { useMousePointInteraction } from './useMousePointInteraction';\nimport { HoverDialog } from './HoverDialog';\nconst THREE = require('three');\n\n// settings\nconst backgroundColor = new THREE.Color('black');\nconst selectedPointSize = 2;\n\n// re-use for instance computations\nconst scratchObject3D = new THREE.Object3D();\n\nconst updateInstancedMeshMatrices = ({\n  sphereSize, aspect, mesh, points, colors, colorAttrib, colorArray, selectedPoint\n}) => {\n  if (!mesh) return;\n  const { show, index } = selectedPoint;\n  const selectedSize = show ? sphereSize*selectedPointSize : sphereSize;\n\n  [...Array(points.length/3)].fill(0).forEach((d,i) => {\n    const [ x, y, z ] = points.slice(i*3,(i+1)*3);\n    // scratchObject3D.position.set(x*aspect, y, z);\n    scratchObject3D.position.set(x, y, z);\n    scratchObject3D.scale.setScalar(i === index ? selectedSize : sphereSize);\n    scratchObject3D.updateMatrix();\n    mesh.setMatrixAt(i, scratchObject3D.matrix);\n  });\n\n  colors.forEach((d,i) => colorArray[i] = d);\n  colorAttrib.needsUpdate = true;\n  mesh.instanceMatrix.needsUpdate = true;\n};\n\nconst useAnimatedLayout = ({ points, colors, speed, onFrame }) => {\n  const animProps = useSpring({\n    points: points,\n    colors: colors,\n    onFrame: ({ points, colors }) => {\n      onFrame({ points, colors});\n    },\n    config: { duration: speed }\n  });\n\n  return animProps;\n};\n\nexport const InstancedPoints = ({\n  data, sphereSize, nPoints, speed, selectedPoint, setSelectedPoint\n}) => {\n  const meshRef = useRef();\n  const colorRef = useRef();\n  const { scene, aspect } = useThree();\n  const { points, colors, pointsData } = data;\n  const colorArray = useMemo(() => new Float32Array(nPoints*3), [ nPoints ]);\n  const { show, index } = selectedPoint;\n\n  useEffect(() => {\n    if ( scene )\n      scene.background = backgroundColor;\n  }, [ scene ]);\n\n  // Animating on change\n  const { points: pointsAnim } = useAnimatedLayout({\n    points,\n    colors,\n    speed,\n    onFrame: ({ points, colors }) => {\n      updateInstancedMeshMatrices({\n        sphereSize,\n        aspect,\n        mesh: meshRef.current,\n        points,\n        colors,\n        colorAttrib: colorRef.current,\n        colorArray,\n        selectedPoint,\n      });\n    },\n  });\n\n  const { handleClick, handlePointerDown } = useMousePointInteraction({\n    selectedPoint,\n    onSelectPoint: setSelectedPoint\n  });\n\n  return (\n    <>\n      <instancedMesh\n        ref={meshRef}\n        args={[null, null, nPoints]}\n        frustumCulled={false}\n        onClick={handleClick}\n        onPointerDown={handlePointerDown}\n      >\n        <sphereBufferGeometry attach='geometry' args={[0.5, 8, 16]} >\n          <instancedBufferAttribute\n            ref={colorRef}\n            attachObject={['attributes', 'color']}\n            args={[colorArray, 3]}\n          />\n        </sphereBufferGeometry>\n        <meshStandardMaterial\n          attach='material'\n          vertexColors={THREE.VertexColors}\n        />\n      </instancedMesh>\n      { show && (\n        <a.group\n          position={ pointsAnim.interpolate((...d) => d.slice(index*3, (index+1)*3)) }\n        >\n          <pointLight\n            distance={9}\n            position={[0, 0, 1.3]}\n            intensity={2.2}\n            decay={30}\n            color=\"#ffffff\"\n          />\n          <pointLight\n            position={[0, 0, 0]}\n            decay={1}\n            distance={10}\n            intensity={5}\n            color=\"#ffffff\"\n          />\n        </a.group>\n      )}\n      <HoverDialog {...{pointsAnim, selectedPoint, pointsData}} />\n    </>\n  );\n};\n","import { useRef } from \"react\";\n\nexport const useMousePointInteraction = ({ selectedPoint, onSelectPoint }) => {\n  // track mousedown position to skip click handlers on drags\n  const mouseDownRef = useRef([0, 0]);\n  const handlePointerDown = e => {\n    mouseDownRef.current[0] = e.clientX;\n    mouseDownRef.current[1] = e.clientY;\n  };\n\n  const handleClick = event => {\n    const { instanceId, clientX, clientY } = event;\n    const downDistance = Math.sqrt(\n      Math.pow(mouseDownRef.current[0] - clientX, 2) +\n        Math.pow(mouseDownRef.current[1] - clientY, 2)\n    );\n\n    // skip click if we dragged more than 5px distance\n    if (downDistance > 5) {\n      event.stopPropagation();\n      return;\n    }\n\n    // toggle the point\n    const { show, index } = selectedPoint;\n    onSelectPoint({\n      show: show\n        ? index === instanceId ? false : true\n        : true,\n      index: instanceId\n    });\n  };\n\n  return { handlePointerDown, handleClick };\n};\n","import React, { useRef, useEffect } from 'react';\nimport { extend, useThree, useFrame } from 'react-three-fiber';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls';\nimport { select } from 'd3';\nconst THREE = require('three');\nextend({ TrackballControls });\n\n// key code constants\nconst ALT_KEY = 18;\nconst CTRL_KEY = 17;\nconst CMD_KEY = 91;\n\nexport const Controls = ({ minDistance, maxDistance, defaultPosition }) => {\n  const controls = useRef();\n  const { camera, gl } = useThree();\n\n  useFrame(() => {\n    // update the view as the vis is interacted with\n    controls.current.update();\n  });\n\n  useEffect(() => {\n    const view = select(gl.domElement);\n    view.on('dblclick.zoom', () => {\n      // reset look-at (target) and camera position\n      controls.current.target.set(0, 0, 0);\n      camera.position.set(...defaultPosition);\n\n      // needed for trackball controls, reset the up vector\n      camera.up.set(\n        controls.current.up0.x,\n        controls.current.up0.y,\n        controls.current.up0.z\n      );\n    });\n  }, [ gl, camera, defaultPosition ])\n\n  return (\n    <trackballControls\n      ref={controls}\n      args={[camera, gl.domElement]}\n      minDistance={minDistance}\n      maxDistance={maxDistance}\n      dynamicDampingFactor={0.1}\n      keys={[\n        ALT_KEY, // orbit\n        CTRL_KEY, // zoom\n        CMD_KEY, // pan\n      ]}\n      mouseButtons={{\n        LEFT: THREE.MOUSE.PAN, // make pan the default instead of rotate\n        MIDDLE: THREE.MOUSE.ZOOM,\n        RIGHT: THREE.MOUSE.ROTATE,\n      }}\n    />\n  );\n};\n","import React, { useRef, useEffect, useMemo } from 'react';\nimport { extend, useThree, useFrame } from 'react-three-fiber';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass';\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader';\nconst THREE = require('three');\n\nextend({ EffectComposer, ShaderPass, RenderPass, UnrealBloomPass });\n\nexport default function Effects() {\n  const composer = useRef();\n  const { scene, gl, size, camera } = useThree();\n  const aspect = useMemo(() => new THREE.Vector2(size.width, size.height), [\n    size,\n  ]);\n  useEffect(() => void composer.current.setSize(size.width, size.height), [\n    size,\n  ]);\n  useFrame(() => composer.current.render(), 1);\n\n  // const bloom = {\n  //   resolution: aspect,\n  //   strength: 0.6,\n  //   radius: 0.01,\n  //   threshold: 0.4,\n  // };\n\n  const bloom = {\n    resolution: aspect,\n    strength: 5.5,\n    radius: 0.01,\n    threshold: 0.6,\n  };\n\n  return (\n    <effectComposer ref={composer} args={[gl]}>\n      <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\n\n      <unrealBloomPass\n        attachArray=\"passes\"\n        args={[bloom.resolution, bloom.strength, bloom.radius, bloom.threshold]}\n      />\n\n      <shaderPass\n        attachArray=\"passes\"\n        args={[FXAAShader]}\n        material-uniforms-resolution-value={[1 / size.width, 1 / size.height]}\n        renderToScreen\n      />\n    </effectComposer>\n  );\n}\n","import React, { useState } from 'react';\nimport { Canvas } from 'react-three-fiber';\nimport { InstancedPoints } from './InstancedPoints';\nimport { Controls } from './Controls';\nimport Effects from './Effects';\n\n// camera settings\nconst fov = 30;\nconst near = 5;\nconst far = 300;\nconst defaultPosition = [0, 0, 110];\n\nexport const ThreeVis = ({ data, sphereSize, nPoints, speed }) => {\n  const [ selectedPoint, setSelectedPoint ] = useState({ show: false, index: 0});\n\n  return (\n    <Canvas\n      camera={{\n        fov: fov,\n        near: 0.1,\n        far: 5000,\n        position: defaultPosition\n      }}\n      onPointerMissed={() => setSelectedPoint({ show:false, index: 0})}\n    >\n      <Controls\n        minDistance={near}\n        maxDistance={far}\n        defaultPosition={defaultPosition}\n      />\n      <ambientLight color=\"#ffffff\" intensity={0.1} />\n      <hemisphereLight\n        color=\"#ffffff\"\n        skyColor=\"#ffffbb\"\n        groundColor=\"#080820\"\n        intensity={1.0}\n      />\n      <InstancedPoints\n        {...{data, sphereSize, nPoints, speed, selectedPoint, setSelectedPoint}}\n      />\n      <Effects />\n    </Canvas>\n  );\n};","import 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState, useMemo } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useEAData } from './useEAData';\nimport { ProgressBar, GeneralSlider } from './sliders';\nimport { FileUpload } from './FileUpload';\nimport './index.css';\nimport { usePlayerControl } from './usePlayerControl';\nimport { useKeyEvents } from './useKeyEvents';\nimport { ThreeVis } from './ThreeVis/ThreeVis';\n\n// controls\nconst defaultSpeed = 250;\nconst defaultSphereSize = 2\nconst speedStep = 25;\nconst minSpeed = 25;\nconst maxSpeed = 2500;\nconst sphereSizeStep = 0.25;\n\nconst App = () => {\n  const [ fileData, setFileData ] = useState(null);\n  const eaData = useEAData(fileData);\n  const { n, nPoints, maxTime } = eaData;\n  const [ sphereSize, setSphereSize ] = useState(defaultSphereSize);\n  const [ speed, setSpeed ] = useState(defaultSpeed);\n  const [ time, setTime ] = useState(0);\n  const data = useMemo(() => ({\n    points: eaData.points[time],\n    colors: eaData.colors[time],\n    pointsData: eaData.pointsData[time],\n    thisTime: eaData.times[time]\n  }), [ time, eaData ]);\n  const { PlayerControl, stopPlay, tooglePlay } = usePlayerControl({ n, setTime, time, speed });\n  useKeyEvents({ tooglePlay, setTime, n, setSpeed, speedStep, minSpeed, maxSpeed })\n\n  return (\n    <div className='main-container'>\n      <div className='canvas-container'>\n        <div className='time-dialog'>\n          {`Time: ${data.thisTime}/${maxTime}`}\n        </div>\n        <ThreeVis {...{data, sphereSize, nPoints, speed }} />\n      </div>\n      <div className='html-bottom-container'>\n        <ProgressBar\n          min={0}\n          max={n-1}\n          now={time}\n          label={`${time}/${n-1} gen`}\n          onChange={(e,value) => setTime(value) }\n        />\n        { PlayerControl }\n        <div className='row'>\n          <GeneralSlider\n            className={'col-4 offset-4'}\n            min={25}\n            max={2500}\n            now={speed}\n            step={speedStep}\n            valueLabelFormat={d => `${d} ms`}\n            unit={'ms'}\n            defaultValue={defaultSpeed}\n            onChange={(e,value) => setSpeed(value)}\n          />\n          <GeneralSlider\n            className={'col-1 offset-1'}\n            min={0.25}\n            max={8}\n            now={sphereSize}\n            step={sphereSizeStep}\n            valueLabelFormat={d => `${d.toFixed(2)} sz`}\n            defaultValue={defaultSphereSize}\n            onChange={(e,value) => setSphereSize(value)}\n          />\n        </div>\n        <FileUpload\n          className='row file-upload offset-1'\n          setContent={d => {\n            setFileData(d);\n            setTime(0);\n            stopPlay();\n          }}\n        />\n        <div className='git-info row justify-content-end'>\n          <a href='https://github.com/renato145/show_evolution'>Source code</a>\n        </div>\n      </div>\n    </div>\n  )\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React, { useRef, useState, useCallback } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlay, faPause, faCaretLeft, faCaretRight, faStepBackward, faStepForward } from '@fortawesome/free-solid-svg-icons'\n\nexport const usePlayerControl = ({ n, setTime, time, speed }) => {\n  const [ play, setPlay ] = useState(false);\n  const [, setPlayCb ] = useState(null)\n  const playRef = useRef();\n  playRef.current = { n, time, speed, play };\n  \n  const removeTimeout = useCallback(() => {\n    setPlayCb(playCb => {\n      if ( playCb ) {\n        clearTimeout(playCb);\n        return null;\n      }\n    });\n  }, []);\n\n  const playFunc = useCallback(() => {\n    const { n, time, speed, play } = playRef.current;\n    if ( (time < (n-1)) & play ) {\n      setTime(time + 1);\n      setPlayCb(setTimeout(playFunc, speed));\n    } else {\n      setPlay(false);\n      removeTimeout();\n    }\n  }, [ removeTimeout, setTime ]);\n\n  const stopPlay = useCallback(() => {\n    setPlay(false);\n    removeTimeout();\n  }, [ removeTimeout ])\n\n  const tooglePlay = useCallback(() => {\n    const { speed, play } = playRef.current;\n    if ( !play ) {\n      setPlay(true);\n      setPlayCb(setTimeout(playFunc, speed));\n    } else {\n      setPlay(false);\n      removeTimeout();\n    }\n  }, [ playFunc, removeTimeout ]);\n\n  const PlayerControl =  (\n    <div className='controllers row justify-content-center'>\n      <div className='button-container'>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(0)}\n        >\n          <FontAwesomeIcon icon={faStepBackward} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(d => Math.max(d-1, 0) )}\n        >\n          <FontAwesomeIcon icon={faCaretLeft} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={tooglePlay}\n        >\n          <FontAwesomeIcon icon={play ? faPause : faPlay} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(d => Math.min(d+1, n-1) )}\n        >\n          <FontAwesomeIcon icon={faCaretRight} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(n-1)}\n        >\n          <FontAwesomeIcon icon={faStepForward} />\n        </button>\n      </div>\n    </div>\n  );\n\n  return { PlayerControl, stopPlay, tooglePlay };\n};\n","import { useEffect } from \"react\";\n\nexport const useKeyEvents = ({ tooglePlay, setTime, n, setSpeed, speedStep, minSpeed, maxSpeed }) => {\n  useEffect(() => {\n    document.onkeydown = e => {\n      if (e.target.tagName === 'BODY') {\n        switch (e.code) {\n          case 'Space':\n            tooglePlay();\n            break;\n        \n          case 'ArrowLeft':\n            setTime(d => Math.max(d-1, 0) );\n            break;\n\n          case 'ArrowRight':\n            setTime(d => Math.min(d+1, n-1) );\n            break;\n\n          case 'ArrowUp':\n            setSpeed(d => Math.min(d+speedStep, maxSpeed))\n            break;\n\n          case 'ArrowDown':\n            setSpeed(d => Math.max(d-speedStep, minSpeed))\n            break;\n\n          default:\n            break;\n        }\n      }\n    };\n  }, [ tooglePlay, setTime, n, setSpeed, speedStep, maxSpeed, minSpeed ]);\n};\n"],"sourceRoot":""}